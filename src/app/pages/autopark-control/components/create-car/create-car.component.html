<form [formGroup]="carForm" (ngSubmit)="onSubmit()">
  <div class="create-car">
    <div class="create-car__specifications">
      <div class="mark-model">
        <div class="mark">
          <div class="subtitle">Марка автомобиля</div>
          <div class="specification-input">
            <input
              type="text"
              [formControl]="carForm.controls.brand"
              pInputText
              placeholder="Начните вводить название"
            />
          </div>
        </div>
        <div class="model">
          <div class="subtitle">Модель автомобиля</div>
          <div class="specification-input">
            <input
              type="text"
              [formControl]="carForm.controls.model"
              pInputText
              placeholder="Начните вводить название"
            />
          </div>
        </div>
      </div>
      <div class="dropdowns">
        @for (options of STATIC_DROPDOWNS; track options) {
          <div class="block">
            <div class="subtitle">
              {{ options.label }}
            </div>
            <p-dropdown
              [options]="options.options"
              [formControlName]="options.formControlName"
              [placeholder]="options.placeholder"
              class="dropdown"
            ></p-dropdown>
          </div>
        }
        <div class="year-power">
          <div class="year">
            <div class="subtitle">Год выпуска</div>
            <div class="specification-input">
              <p-inputNumber
                [useGrouping]="false"
                [min]="1940"
                [max]="getCurrentYear()"
                [formControl]="carForm.controls.yearOfRelease"
                suffix=" год"
                placeholder="Введите год"
              ></p-inputNumber>
            </div>
          </div>
          <div class="power">
            <div class="subtitle">Мощность</div>
            <div class="specification-input">
              <p-inputNumber
                [useGrouping]="false"
                [min]="20"
                [max]="1000"
                [formControl]="carForm.controls.enginePower"
                suffix=" л.с."
                placeholder="Введите мощность автомобиля"
              ></p-inputNumber>
            </div>
          </div>
        </div>
      </div>

      <div class="tariff">
        <div class="subtitle">Тариф</div>
        <div class="label">Вам доступны тарифы, которые подходят для выбранного автомобиля в вашем регионе</div>
        <div class="specification-input">
          <p-dropdown
            [options]="tariffTypes"
            [formControl]="carForm.controls.type"
            placeholder="Выберите тариф(ы)"
          ></p-dropdown>
        </div>
      </div>
    </div>

    <div class="create-car__financial-additional-info">
      <div class="financial-info">
        <div class="subtitle">Финансовая информация</div>
        <div class="label">Отметьте информацию, которая будет отображаться в профиле автомобиля</div>
        <div class="options">
          @for (option of financialOptions; track option) {
            <div [class]="option.class">
              @for (item of option.items; track item; let isLast = $last) {
                <p-checkbox [binary]="true" class="checkbox"></p-checkbox>
                <label>{{ item.label }}</label>
                @if (!isLast) {
                  <span class="vertical-line"></span>
                }
                @if (item.placeholder) {
                  <p-inputNumber [placeholder]="item.placeholder" class="option-input"></p-inputNumber>
                  <span>{{ item.unit }}</span>
                }
              }
            </div>
          }
          <div class="price">
            <span>Введите цену аренды</span>
            <p-inputNumber class="option-input"></p-inputNumber>
            <span>руб/сут</span>
          </div>
          <div class="payments">
            <span>Выплаты каждые</span>
            <p-inputNumber class="option-input"></p-inputNumber>
            <span>дня</span>
          </div>
        </div>
      </div>
      <div class="additional-info">
        <div class="subtitle">Дополнительная информация</div>
        <div class="label">Отметьте информацию, которая будет отражена в карточке автомобиля</div>
        <p-multiSelect
          class="multiselect"
          optionLabel="label"
          display="chip"
          [options]="additionalInfo"
        ></p-multiSelect>
      </div>
    </div>

    <div class="create-car__verification">
      <div class="sts">
        <div class="subtitle">СТС</div>
        <input type="number" [formControl]="carForm.controls.brand" pInputText placeholder="8756347856375625964" />
      </div>
      <div class="vin">
        <div class="subtitle">VIN</div>
        <input
          type="text"
          [formControl]="carForm.controls.brand"
          pInputText
          placeholder="Введите идентификационной номер"
        />
      </div>
      <div class="gov-number">
        <div class="subtitle">Государственные номера</div>
        <input
          type="text"
          [formControl]="carForm.controls.brand"
          pInputText
          placeholder="Введите государственный номер"
        />
      </div>
    </div>

    <div class="create-car__photos">
      <div class="subtitle">Фотографии автомобиля</div>
      <div class="label">
        Загрузите фотографии автомобиля, которые будут отображаться на сайте (минимум 1, максимум 10)
      </div>
      <app-file-upload></app-file-upload>
    </div>

    <div class="create-car__btns">
      <p-button
        type="submit"
        [disabled]="carForm.invalid || carForm.pending"
        (submit)="onSubmit()"
        class="add-btn"
        label="Добавить автомобиль"
      ></p-button>
      <p-button class="cancel-btn" label="Отменить" styleClass="p-button-outlined"></p-button>
    </div>
  </div>
</form>
